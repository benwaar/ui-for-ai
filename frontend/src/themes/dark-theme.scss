@use '@angular/material' as mat;

/**
 * Dark Theme - WCAG AA Compliant Dark Mode
 *
 * Design Principles:
 * - Background: #121212 (Material's recommended dark surface)
 * - Primary: Light blue (#42A5F5) - high contrast on dark
 * - Accent: Light purple (#AB47BC) - distinct from primary
 * - Warn: Amber (#FFA726) - visible on dark without being harsh
 *
 * Confidence Level Colors (adjusted for dark mode):
 * - High: Light blue (#42A5F5)
 * - Medium: Light purple (#AB47BC)
 * - Low: Amber (#FFA726)
 *
 * All colors meet WCAG AA contrast requirements (4.5:1 for text, 3:1 for UI)
 */

// Define custom palettes for dark theme
$dark-primary: mat.define-palette(mat.$blue-palette, 300); // Lighter blue for dark backgrounds
$dark-accent: mat.define-palette(mat.$purple-palette, 300); // Lighter purple for dark backgrounds
$dark-warn: mat.define-palette(mat.$amber-palette, 300); // Amber instead of orange for dark mode

// Create the dark theme
$dark-theme: mat.define-dark-theme(
  (
    color: (
      primary: $dark-primary,
      accent: $dark-accent,
      warn: $dark-warn,
    ),
  )
);

// Apply theme to .dark-theme class
.dark-theme {
  @include mat.all-component-themes($dark-theme);

  // Custom confidence colors (adjusted for dark mode)
  --confidence-high-color: #42a5f5; // Light blue
  --confidence-high-bg: #1a237e; // Dark blue background
  --confidence-high-border: #42a5f5;

  --confidence-medium-color: #ab47bc; // Light purple
  --confidence-medium-bg: #4a148c; // Dark purple background
  --confidence-medium-border: #ab47bc;

  --confidence-low-color: #ffa726; // Amber
  --confidence-low-bg: #e65100; // Dark orange background
  --confidence-low-border: #ffa726;

  // Message backgrounds
  --user-message-bg: #1976d2; // Blue (slightly darker than light theme)
  --user-message-color: #ffffff;

  --assistant-message-bg: #1e1e1e; // Dark surface
  --assistant-message-color: #e0e0e0; // Light text

  --system-message-bg: #3e2723; // Dark brown (warm)
  --system-message-color: #ffb74d; // Light orange
  --system-message-border: #ff9800;

  // App background (Material Design dark mode recommendations)
  --app-background: #121212; // Darkest background
  --surface-background: #1e1e1e; // Elevated surface

  // Text colors
  --text-primary: #e0e0e0; // Light gray for primary text
  --text-secondary: #9e9e9e; // Medium gray for secondary text
  --text-disabled: #616161; // Dark gray for disabled text

  // Borders
  --border-color: #424242;
  --divider-color: #424242;

  // Shadows (less visible in dark mode)
  --shadow-color: rgba(0, 0, 0, 0.5);

  // Custom component styling
  .confidence-badge {
    &.high {
      background-color: var(--confidence-high-bg);
      color: var(--confidence-high-color);
      border: 2px solid var(--confidence-high-border);
      border-style: solid; // Triple encoding: solid border for high
    }

    &.medium {
      background-color: var(--confidence-medium-bg);
      color: var(--confidence-medium-color);
      border: 2px dashed var(--confidence-medium-border); // Dashed for medium
    }

    &.low {
      background-color: var(--confidence-low-bg);
      color: var(--confidence-low-color);
      border: 2px dotted var(--confidence-low-border); // Dotted for low
    }
  }

  .message {
    &.assistant {
      &.confidence-high {
        border-left: 4px solid var(--confidence-high-border);
      }

      &.confidence-medium {
        border-left: 4px dashed var(--confidence-medium-border);
      }

      &.confidence-low {
        border-left: 4px dotted var(--confidence-low-border);
      }
    }
  }

  // Ensure proper contrast for dark mode (WCAG AA)
  .mat-mdc-card {
    background-color: var(--surface-background);
    color: var(--text-primary);
  }

  .mat-mdc-raised-button.mat-primary {
    background-color: #1976d2;
    color: #ffffff;
  }

  .mat-mdc-raised-button.mat-accent {
    background-color: #7b1fa2;
    color: #ffffff;
  }

  .mat-mdc-raised-button.mat-warn {
    background-color: #f57c00;
    color: #ffffff;
  }

  // Input fields need higher contrast in dark mode
  .mat-mdc-form-field {
    .mat-mdc-text-field-wrapper {
      background-color: #2c2c2c;
    }

    .mat-mdc-input-element {
      color: var(--text-primary);
    }
  }

  // Scrollbar styling for dark mode
  *::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  *::-webkit-scrollbar-track {
    background: #1e1e1e;
  }

  *::-webkit-scrollbar-thumb {
    background: #424242;
    border-radius: 4px;

    &:hover {
      background: #616161;
    }
  }
}
